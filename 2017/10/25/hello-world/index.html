<!DOCTYPE html><html lang="en-us"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1"><title>Getting Started with TensorFlow On IOS | KingSoft-AI</title><meta name="description"><meta name="generator" content="KingSoft-AI"><meta name="author"><meta name="keywords" content="AI,CV,github,TensorFlow"><meta name="HandheldFriendly" content="True"><meta name="MobileOptimized" content="320"><meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1,user-scalable=0"><link rel="stylesheet" type="text/css" href="/styles/screen.css"><link rel="apple-touch-icon" sizes="57x57" href="/images/apple-touch-icon-57x57.png"><link rel="apple-touch-icon" sizes="60x60" href="/images/apple-touch-icon-60x60.png"><link rel="apple-touch-icon" sizes="72x72" href="/images/apple-touch-icon-72x72.png"><link rel="apple-touch-icon" sizes="76x76" href="/images/apple-touch-icon-76x76.png"><link rel="apple-touch-icon" sizes="114x114" href="/images/apple-touch-icon-114x114.png"><link rel="apple-touch-icon" sizes="120x120" href="/images/apple-touch-icon-120x120.png"><link rel="apple-touch-icon" sizes="144x144" href="/images/apple-touch-icon-144x144.png"><link rel="apple-touch-icon" sizes="152x152" href="/images/apple-touch-icon-152x152.png"><link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-180x180.png"><link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32.png"><link rel="icon" type="image/png" sizes="96x96" href="/images/favicon-96x96.png"><link rel="icon" type="image/png" sizes="160x160" href="/images/favicon-160x160.png"><link rel="icon" type="image/png" sizes="192x192" href="/images/favicon-192x192.png"><meta name="msapplication-TileColor" content="#121315"><meta name="msapplication-TileImage" content="/images/mstile-144x144.png"></head><body itemscope itemtype="https://schema.org/WebPage"><header itemscope itemtype="https://schema.org/WPHeader"><a href="/"><img src="/images/head.jpg" alt="KingSoft-AI" title="KingSoft-AI"></a><h1><a href="/" alt="KingSoft-AI" title="KingSoft-AI" itemprop="headline">KingSoft-AI</a></h1><p itemprop="description"></p><nav itemscope itemtype="https://schema.org/SiteNavigationElement"><ul><li itemprop="name"><a href="/" alt="HOME" title="HOME" itemprop="url">HOME</a></li><li itemprop="name"><a href="/articles" alt="CATEGORIES" title="CATEGORIES" itemprop="url">CATEGORIES</a></li><li itemprop="name"><a href="/about" alt="ABOUT US" title="ABOUT US" itemprop="url">ABOUT US</a></li></ul></nav><div class="space"></div></header><main itemscope itemtype="https://schema.org/Blog"><article class="full"><h1 itemprop="headline">Getting Started with TensorFlow On IOS</h1><span class="post-meta">Published on<time itemprop="datePublished" datetime="2017-10-25T09:56:32.000Z"> Wednesday, October 25th 2017 at 17:56</time><br>Last updated on<time itemprop="dateModified" datetime="2017-10-25T09:56:32.000Z"> Thursday, October 26th 2017 at 10:51</time></span><p>Welcome to KingSoft AILab! In this article,we’ll walk through getting TensorFlow, Google’s machine learning library, set up to perform inference directly on an iOS device.</p>
<h4 id="Installing-TensorFlow-on-IOS"><a href="#Installing-TensorFlow-on-IOS" class="headerlink" title="Installing TensorFlow on IOS"></a>Installing TensorFlow on IOS</h4><blockquote>
<p>The binary distribution of TensorFlow for macOS does not include the IOS static library or some of the scripts we’ll need, so we’ll have to build both ourselves in a later section. Since it helps if the version of the iOS library is the same as the version of TensorFlow installed on our system, we’ll re-install the latest version of TensorFlow from source (even if it’s already installed). This can save us some headaches down the road.</p>
<p>DownLoad TensorFlow here: <a href="https://github.com/tensorflow/tensorflow" target="_blank" rel="external">TensorFlow</a></p>
</blockquote>
<h4 id="Building-Tensorflow-on-IOS"><a href="#Building-Tensorflow-on-IOS" class="headerlink" title="Building Tensorflow on IOS"></a>Building Tensorflow on IOS</h4><blockquote>
<p>From our directory of TensorFlow sources, we can simply run:</p>
</blockquote>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ tensorflow/contrib/makefile/build_all_ios.sh</div></pre></td></tr></table></figure>
<blockquote>
<p>Running build_all_ios.sh will generate a TensorFlow static library in the tensorflow/contrib/makefile/gen/lib subdirectory. This library is compiled for ARMv7, ARM64, and x86 architectures, so you can use it in both the iOS simulator and on iOS hardware.</p>
</blockquote>
<h4 id="Setting-up-xcode-project"><a href="#Setting-up-xcode-project" class="headerlink" title="Setting up xcode project"></a>Setting up xcode project</h4><blockquote>
<p>Create a new xcode project,we call it TensorFlowTest,then,we have to tell the iOS target about the TensorFlow static library we built for iOS (and the protocol buffer library is relies on). To do this, copy the following static library to your TensorFlowTest project Dir.</p>
</blockquote>
<p><table><tr><td bgcolorr="BlueViolet"> <strong>tensorflow/tensorflow/contrib/makefile/gen/lib/libtensorflow-core.a</strong><br><strong>tensorflow/tensorflow/contrib/makefile/gen/protobuf_ios/lib/libprotobuf-lite.a</strong><br><strong>tensorflow/tensorflow/contrib/makefile/gen/lib/libprotobuf.a</strong></td></tr></table></p>
<blockquote>
<p>Then add select xcode “Building Setting” menu,add <strong>$(PROJECT_DIR)/TensorFlowTest</strong> to Library Search Paths.Here replace <em>TensorFlowTest</em> to your project name. We’ll also add the following flags to Other Linker Flags:</p>
</blockquote>
<p><table><tr><td bgcolorr="BlueViolet"> <strong>-force_load $(PROJECT_DIR)/Your_Project_Name/libtensorflow-core.a</strong><br><strong>$(PROJECT_DIR)/Your_Project_Name/libprotobuf-lite.a</strong><br><strong>$(PROJECT_DIR)/Your_Project_Name/libprotobuf.a</strong></td></tr></table></p>
<blockquote>
<p>Next, we add the following to Header Search Paths.</p>
</blockquote>
<p><table><tr><td bgcolorr="BlueViolet"> <strong>~/tensorflow</strong><br><strong>~/tensorflow/tensorflow/contrib/makefile/gen/proto</strong><br><strong>~/tensorflow/tensorflow/contrib/makefile/downloads</strong><br><strong>~/tensorflow/tensorflow/contrib/makefile/downloads/protobuf/src</strong><br><strong>~/tensorflow/tensorflow/contrib/makefile/downloads/eigen</strong></td></tr></table></p>
<blockquote>
<p>Now that the xcode project is set up, we’ll load up our model and perform inference on the test datesets.</p>
</blockquote>
</article></main></body></html>